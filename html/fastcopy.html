<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>分支信息查看器</title>  
    <style>  
        /* 基础样式 */  
        * {  
            margin: 0;  
            padding: 0;  
            box-sizing: border-box;  
        }  

        body {  
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;  
            display: flex;  
            min-height: 100vh;  
            background-color: #f3f4f6;  
        }  

        /* 侧边栏样式 */  
        .sidebar {  
            width: 250px;  
            background-color: #1e293b;  
            padding: 1rem;  
            flex-shrink: 0;  
        }  

        .nav-item {  
            padding: 0.75rem 1rem;  
            color: #e2e8f0;  
            cursor: pointer;  
            border-radius: 0.375rem;  
            margin-bottom: 0.5rem;  
            transition: all 0.2s;  
        }  

        .nav-item:hover {  
            background-color: #334155;  
        }  

        .nav-item.active {  
            background-color: #3b82f6;  
            color: white;  
        }  

        /* 主内容区样式 */  
        .main-container {  
            flex: 1;  
            display: flex;  
            flex-direction: column;  
            overflow-x: hidden;  
        }  

        .header {  
            background-color: white;  
            padding: 1.5rem;  
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);  
        }  

        .main-title {  
            font-size: 1.5rem;  
            color: #1e293b;  
            margin-bottom: 0.5rem;  
        }  

        .usage-guide {  
            color: #64748b;  
            font-size: 0.875rem;  
        }  

        .main-content {  
            padding: 1.5rem;  
            flex: 1;  
        }  

        /* 内容区块样式 */  
        .section {  
            background-color: white;  
            border-radius: 0.5rem;  
            padding: 1.5rem;  
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);  
        }  

        .section-title {  
            font-size: 1.25rem;  
            color: #1e293b;  
            margin-bottom: 1rem;  
        }  

        .description {  
            color: #64748b;  
            margin-bottom: 1.5rem;  
        }  

        .item {  
            margin-bottom: 1rem;  
            padding: 1rem;  
            border: 1px solid #e2e8f0;  
            border-radius: 0.375rem;  
        }  

        .label {  
            font-size: 0.875rem;  
            color: #64748b;  
            margin-bottom: 0.5rem;  
        }  

        /* 按钮样式 */  
        .copy-btn, .file-action-btn {  
            background-color: #f8fafc;  
            border: 1px solid #e2e8f0;  
            padding: 0.5rem 1rem;  
            border-radius: 0.375rem;  
            color: #475569;  
            cursor: pointer;  
            font-size: 0.875rem;  
            transition: all 0.2s;  
            width: 100%;  
            text-align: left;  
            overflow: hidden;  
            text-overflow: ellipsis;  
            white-space: nowrap;  
        }  

        .copy-btn:hover, .file-action-btn:hover {  
            background-color: #f1f5f9;  
        }  

        .file-content-container {  
            display: flex;  
            flex-direction: column;  
            gap: 0.5rem;  
        }  

        .file-path {  
            font-family: monospace;  
            padding: 0.5rem;  
            background-color: #f8fafc;  
            border-radius: 0.375rem;  
            font-size: 0.875rem;  
            color: #475569;  
        }  

        .file-buttons {  
            display: flex;  
            gap: 0.5rem;  
        }  

        /* 提示框样式 */  
        .tooltip {  
            position: fixed;  
            bottom: 2rem;  
            left: 50%;  
            transform: translateX(-50%);  
            background-color: #1e293b;  
            color: white;  
            padding: 0.75rem 1.5rem;  
            border-radius: 0.375rem;  
            font-size: 0.875rem;  
            display: none;  
            opacity: 0;  
            transition: opacity 0.3s;  
            z-index: 1000;  
        }  

        /* 离线状态提示 */  
        .offline-status {  
            background-color: #fef3c7;  
            color: #92400e;  
            padding: 0.5rem 1rem;  
            border-radius: 4px;  
            margin: 1rem;  
            text-align: center;  
            font-size: 0.875rem;  
            display: none;  
        }  

        /* 导出按钮样式 */  
        .export-btn {  
            position: fixed;  
            bottom: 20px;  
            right: 20px;  
            padding: 8px 16px;  
            background-color: #3b82f6;  
            color: white;  
            border: none;  
            border-radius: 4px;  
            cursor: pointer;  
            font-size: 14px;  
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);  
            z-index: 1000;  
        }  

        .export-btn:hover {  
            background-color: #2563eb;  
        }  

        /* 响应式设计 */  
        @media (max-width: 768px) {  
            body {  
                flex-direction: column;  
            }  

            .sidebar {  
                width: 100%;  
                padding: 0.5rem;  
            }  

            .main-container {  
                min-height: 0;  
            }  
        }  
    </style>  
</head>  
<body>  
    <div class="sidebar">  
        <nav id="nav-container"></nav>  
    </div>  

    <div class="main-container">  
        <div class="header">  
            <h1 class="main-title">分支信息查看器</h1>  
            <p class="usage-guide">点击左侧导航切换不同分支，点击内容可以快速复制</p>  
            <div id="offline-status" class="offline-status">  
                当前处于离线模式  
            </div>  
        </div>  

        <main class="main-content" id="main-content"></main>  
    </div>  

    <div class="tooltip" id="tooltip">已复制到剪贴板</div>  
	<script src="./fastcopydata.js"></script>  
    <script>
        // 应用逻辑  
        function initializeNavigation() {  
            const navContainer = document.getElementById('nav-container');  
            Object.entries(branchData).forEach(([key, branch]) => {  
                const navItem = document.createElement('div');  
                navItem.className = 'nav-item';  
                navItem.textContent = branch.title;  
                navItem.dataset.branchId = key;  
                navItem.addEventListener('click', () => {  
                    window.location.hash = key;  
                });  
                navContainer.appendChild(navItem);  
            });  
        }  

        function showBranchContent(branchId) {  
            const branch = branchData[branchId];  
            if (!branch) {  
                console.error('分支不存在:', branchId);  
                const firstBranchId = Object.keys(branchData)[0];  
                window.location.hash = firstBranchId;  
                return;  
            }  

            document.title = `${branch.title} - 分支信息查看器`;  
            
            const mainContent = document.getElementById('main-content');  
            mainContent.innerHTML = '';  
            
            const section = document.createElement('div');  
            section.className = 'section active';  
            
            section.innerHTML = `  
                <h2 class="section-title">${branch.title}</h2>  
                <p class="description">${branch.description}</p>  
            `;  
            
            branch.items.forEach(item => {  
                const itemDiv = document.createElement('div');  
                itemDiv.className = 'item';  
                
                if (item.type === 'file') {  
                    itemDiv.innerHTML = `  
                        <div class="label">${item.label}</div>  
                        <div class="file-content-container">  
                            <div class="file-path">${item.content}</div>  
                            <div class="file-buttons">  
                                <button class="file-action-btn browser-btn" onclick="window.open('${item.content}', '_blank')">  
                                    在浏览器中打开  
                                </button>  
                                <button class="file-action-btn copy-path-btn" data-content="${item.content}">  
                                    复制路径  
                                </button>  
                            </div>  
                        </div>  
                    `;  
                } else {  
                    itemDiv.innerHTML = `  
                        <div class="label">${item.label}</div>  
                        <button class="copy-btn" data-content="${item.content}">  
                            ${item.content}  
                        </button>  
                    `;  
                }  
                
                section.appendChild(itemDiv);  
            });  
            
            mainContent.appendChild(section);  
            
            document.querySelectorAll('.nav-item').forEach(item => {  
                item.classList.toggle('active', item.dataset.branchId === branchId);  
            });  
            
            setupCopyButtons();  
        }  

        function showMessage(message) {  
            const tooltip = document.getElementById('tooltip');  
            tooltip.textContent = message;  
            tooltip.style.display = 'block';  
            tooltip.style.opacity = '1';  
            
            setTimeout(() => {  
                tooltip.style.opacity = '0';  
                setTimeout(() => {  
                    tooltip.style.display = 'none';  
                }, 300);  
            }, 3000);  
        }  

        function setupCopyButtons() {  
            const copyButtons = document.querySelectorAll('.copy-btn, .copy-path-btn');  
            
            copyButtons.forEach(button => {  
                button.addEventListener('click', async () => {  
                    const content = button.dataset.content;  
                    try {  
                        await navigator.clipboard.writeText(content);  
                        showMessage('已复制到剪贴板');  
                    } catch (err) {  
                        console.error('复制失败:', err);  
                        showMessage('复制失败，请手动复制');  
                    }  
                });  
            });  
        }  

        function handleHashChange() {  
            const hash = window.location.hash.slice(1);  
            if (hash) {  
                showBranchContent(hash);  
            } else {  
                const firstBranchId = Object.keys(branchData)[0];  
                window.location.hash = firstBranchId;  
            }  
        }  

        function setupOfflineDetection() {  
            const offlineStatus = document.getElementById('offline-status');  
            
            function updateOnlineStatus() {  
                if (navigator.onLine) {  
                    offlineStatus.style.display = 'none';  
                } else {  
                    offlineStatus.style.display = 'block';  
                }  
            }  

            window.addEventListener('online', updateOnlineStatus);  
            window.addEventListener('offline', updateOnlineStatus);  
            updateOnlineStatus();  
        }  

        function setupExport() {  
            const exportButton = document.createElement('button');  
            exportButton.className = 'export-btn';  
            exportButton.textContent = '导出数据';  
            
            exportButton.addEventListener('click', () => {  
                const dataStr = JSON.stringify(branchData, null, 2);  
                const blob = new Blob([dataStr], { type: 'application/json' });  
                const url = URL.createObjectURL(blob);  
                const a = document.createElement('a');  
                a.href = url;  
                a.download = 'branch-data.json';  
                document.body.appendChild(a);  
                a.click();  
                document.body.removeChild(a);  
                URL.revokeObjectURL(url);  
                
                showMessage('数据已导出');  
            });  
            
            document.body.appendChild(exportButton);  
        }  

        function setupKeyboardShortcuts() {  
            document.addEventListener('keydown', (e) => {  
                // Ctrl/Cmd + S 触发导出  
                if ((e.ctrlKey || e.metaKey) && e.key === 's') {  
                    e.preventDefault();  
                    document.querySelector('.export-btn').click();  
                }  
                
                // 左右方向键切换分支  
                if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {  
                    const branches = Object.keys(branchData);  
                    const currentIndex = branches.indexOf(window.location.hash.slice(1));  
                    if (currentIndex !== -1) {  
                        let newIndex;  
                        if (e.key === 'ArrowLeft') {  
                            newIndex = (currentIndex - 1 + branches.length) % branches.length;  
                        } else {  
                            newIndex = (currentIndex + 1) % branches.length;  
                        }  
                        window.location.hash = branches[newIndex];  
                    }  
                }  
            });  
        }  

        // 初始化所有功能  
        function initializeApp() {  
            initializeNavigation();  
            setupOfflineDetection();  
            setupExport();  
            setupKeyboardShortcuts();  
            
            // 处理初始hash  
            if (window.location.hash) {  
                handleHashChange();  
            } else {  
                const firstBranchId = Object.keys(branchData)[0];  
                window.location.hash = firstBranchId;  
            }  
        }  

        // 确保DOM加载完成后再初始化  
        if (document.readyState === 'loading') {  
            document.addEventListener('DOMContentLoaded', initializeApp);  
        } else {  
            initializeApp();  
        }  

        // 添加hash变化监听  
        window.addEventListener('hashchange', handleHashChange);  
    </script>  
</body>  
</html>